<div class="dialog-content">
    <div class="dialog-head">
        <span>Profil</span>
        <button mat-icon-button mat-dialog-close>
            <mat-icon>close</mat-icon>
        </button>
    </div>
    <div class="avatar">
        <img src="{{selectedAvatar}}">
        <button *ngIf="!openAvatarSelection" (click)="toggleAvatarSelection()" mat-button>Avatar ändern</button>
    </div>

    <div *ngIf="openAvatarSelection" class="avatar-selection">
        <h3>Wähle deinen Avatar</h3>
        <div  class="avatar-list">
            <img *ngFor="let avatar of avatarPaths" (click)="changeAvatar(avatar)" [src]="avatar">
        </div>
       
        <input type="file" (change)="onFileSelected($event)">
        <span *ngIf="errorUploadFile">Bitte wählen Sie eine gültige Datei</span>
      </div>
      
    <div *ngIf="!openAvatarSelection" class="name-input">
        <div class="name">
            <img src="../../../assets/icons/account_circle.svg">
            <span>Vollständiger Name</span>
        </div>
        <input [(ngModel)]="newUserName" matInput placeholder="{{currentUser.name}}">
    </div>
    <div *ngIf="!openAvatarSelection" class="name-input">
        <div class="name">
            <img src="../../../assets/icons/mail.svg">
            <span>E-Mail-Adresse</span>
        </div>
        <input matTooltip="Please contact an admin to change your email!" matTooltipPosition="above"  disabled matInput placeholder="{{currentUser.email}}">
    </div>
    <div class="buttons">
        <button *ngIf="!openAvatarSelection" mat-raised-button mat-dialog-close>Abbrechen</button>
        <button *ngIf="!openAvatarSelection" [disabled]="newUserName === currentUser.name && selectedAvatar === currentUser.avatar" (click)="saveChanges()" mat-raised-button color="primary">Speichern</button>
        <button (click)="toggleAvatarSelection()" *ngIf="openAvatarSelection" mat-raised-button> Zurück </button>
    </div>
</div>