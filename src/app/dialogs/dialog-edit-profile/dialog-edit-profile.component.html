<div class="dialog-content">
    <div class="dialog-head">
        <span>Profil</span>
        <button mat-icon-button mat-dialog-close>
            <mat-icon>close</mat-icon>
        </button>
    </div>
    <div class="avatar buttons">
        <img src="{{selectedAvatar}}">
        <button mat-raised-button *ngIf="!openAvatarSelection" (click)="toggleAvatarSelection()">Avatar ändern</button>
    </div>

    <div *ngIf="openAvatarSelection" class="avatar-selection">
        <h3>Wähle deinen Avatar</h3>
        <div  class="avatar-list">
            <img *ngFor="let avatar of avatarPaths" (click)="changeAvatar(avatar)" [src]="avatar">
        </div>
        <div class="file-upload buttons">
            <button matTooltip="Dateigröße darf 1.5mb nicht überschreiten!" matTooltipPosition="above" mat-raised-button color="primary" (click)="fileInput.click()">Avatar hochladen</button>
            <input #fileInput type="file" (change)="onFileSelected($event)" 
                   accept="image/jpeg, image/jpg, image/png" 
                   hidden>
          </div>
          <span class="error" *ngIf="errorUploadFile">Bitte wählen Sie eine gültige Datei!</span>
      </div>
      
    <div *ngIf="!openAvatarSelection" class="name-input">
        <div class="name">
            <img src="../../../assets/icons/account_circle.svg">
            <span>Vollständiger Name</span>
        </div>
        <input [(ngModel)]="newUserName" matInput placeholder="{{currentUser.name}}">
    </div>
    <div *ngIf="!openAvatarSelection" class="name-input">
        <div class="name">
            <img src="../../../assets/icons/mail.svg">
            <span>E-Mail-Adresse</span>
        </div>
        <input matTooltip="Email Änderung bitte bei Admin anfragen!" matTooltipPosition="above"  disabled matInput placeholder="{{currentUser.email}}">
    </div>
    <div class="buttons">
        <button *ngIf="!openAvatarSelection" mat-raised-button mat-dialog-close>Abbrechen</button>
        <button *ngIf="!openAvatarSelection" [disabled]="newUserName === currentUser.name && selectedAvatar === currentUser.avatar" (click)="saveChanges()" mat-raised-button color="primary">Speichern</button>
        <button (click)="toggleAvatarSelection()" *ngIf="openAvatarSelection" mat-raised-button> Zurück </button>
    </div>
</div>